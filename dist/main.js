(()=>{"use strict";const t="rgb(211,211,211)",e="rgb(255,0,0)";class i{constructor(){this.board=[],this.TOTALTILES=100,this.tileHitList=[],this.initiliseBoard(),this.MAX_LENGTH=5,this.isVertical=!1,this.allShips=[]}initiliseBoard(){for(let e=0;e<this.TOTALTILES;e++)this.board[e]=t,this.tileHitList[e]=!1}makeVertical(){this.isVertical=!0}makeHorizontal(){this.isVertical=!1}getBoard(){return this.board}getTotalTiles(){return this.TOTALTILES}getBoolBoard(){return this.tileHitList}isFirstColumn(t){return t%10==0}canShipBePlaced(e,i){for(let l=0;l<e;l++)if(this.isVertical){if(i+10>this.TOTALTILES)return!1;if(this.board[i+10*l]!=t)return!1}else{if(i+l>this.TOTALTILES)return!1;if(this.board[i+l]!=t)return!1;if(l>0&&this.isFirstColumn(i+l))return!1}return!0}placeShip(t){const i=t.getLength(),l=t.getTileId();if(this.canShipBePlaced(i,l)){if(this.isVertical)for(let t=0;t<i;t++)this.board[l+10*t]=e;else for(let t=0;t<i;t++)this.board[l+t]=e;this.allShips.push(t)}}receiveAttack(t){if(this.getBoolBoard()[t])return;if(this.tileHitList[t]=!0,!l(this.getBoard()).includes(t))return void(this.board[t]="rgb(0,255,0)");const e=n(this.allShips,t);e.hit(),e.hasSunk()&&console.log("1 Ship down ")}isEmpty(){for(let e=0;e<this.TOTALTILES;e++)if(this.board[e]!=t)return!1;return!0}}const l=t=>{let i=[];for(let l in t)t[l]==e&&i.push(parseInt(l));return i},n=(t,e)=>{for(let i of t){const t=i.getLength();if(i.isVertical){for(let l=0;l<t;l++)if(e==i.getTileId()+10*l)return i}else for(let l=0;l<t;l++)if(e==i.getTileId()+l)return i}};class s{constructor(t,e,i){this.length=t,this.hits=0,this.tileId=e,this.isVertical=i}hit(){this.hits++}getTileId(){return this.tileId}isVertical(){return this.isVertical}getLength(){return this.length}hasSunk(){return this.length==this.hits}}function r(){let t=!1,e=new i;const l=e.getTotalTiles(),n=document.createElement("div");n.id="headingDiv";const r=document.createElement("h2");r.textContent="Place Your Ships",n.appendChild(r);const o=document.createElement("div");o.style.display="grid",o.id="gameboardDiv",o.style.width="300px",o.style.height="300px",o.style.gridTemplateColumns="repeat(10,1fr)",o.style.border="2px solid black";for(let i=0;i<l;i++){const l=document.createElement("div");l.style.border="1px solid black",l.id="tile"+i,l.className="tiles",l.style.backgroundColor="rgb(211,211,211)",o.appendChild(l),l.addEventListener("click",(()=>{const l=new s(p(e),i,t);e.allShips.length!=e.MAX_LENGTH&&(e.placeShip(l),u(e.getBoard()))}))}const a=document.createElement("button");a.textContent="Place Vertically",a.id="orientationOfShipsBtn",a.addEventListener("click",(()=>{e.isVertical?(e.makeHorizontal(),a.textContent="Place Vertically"):(e.makeVertical(),a.textContent="Place Horizontally"),t=e.isVertical}));const d=document.createElement("button");d.id="resetbtn",d.textContent="Reset",d.addEventListener("click",(()=>{e=new i,t&&e.makeVertical(),u(e.getBoard())}));const c=document.createElement("button");c.id="submitbtn",c.textContent="Submit the Ships",c.addEventListener("click",(()=>{5==e.allShips.length?(t=>{const e=t.getTotalTiles(),i=document.getElementById("content");i.innerHTML="";const l=document.createElement("div");l.id="headingDiv";const n=document.createElement("h2");n.textContent="BattleShip",l.appendChild(n);const s=document.createElement("div");s.style.display="grid",s.id="gameboardDiv",s.style.width="300px",s.style.height="300px",s.style.gridTemplateColumns="repeat(10,1fr)",s.style.border="2px solid black";for(let i=0;i<e;i++){const e=document.createElement("div");e.style.border="1px solid black",e.id="CPUtile"+i,e.className="CPUtile",e.style.backgroundColor="rgb(211,211,211)",s.appendChild(e),e.addEventListener("click",(()=>{t.receiveAttack(i),r(t,e.className)}))}i.appendChild(n),i.appendChild(s);const r=(t,i)=>{for(let l=0;l<e;l++)t.getBoolBoard()[l]&&(document.getElementById(i+l).style.backgroundColor=t.getBoard()[l])}})(e):alert("Place all five ships!!")}));const h=document.getElementById("content");h.appendChild(n),h.appendChild(a),h.appendChild(o),h.appendChild(d),h.appendChild(c);const u=t=>{for(let e=0;e<l;e++)document.getElementById("tile"+e).style.backgroundColor=t[e]},p=t=>{let e=[];for(let i of t.allShips)e.push(i.getLength());for(let i=1;i<t.MAX_LENGTH+1;i++)if(!e.includes(i))return i;return!1}}window.onload=()=>{r()}})();